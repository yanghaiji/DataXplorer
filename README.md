
<h1 align="center">
  <a href="https://github.com/yanghaiji/DataXplorer.git"><img src="https://github.com/yanghaiji/logger-agent/blob/main/doc/img/new_logo_01.png" alt="Standard - javayh-logger-agent" width="500"></a>
</h1>
<p align="center">
    <a href="https://spring.io/projects"><img src='https://img.shields.io/badge/license-Apache%202-borightgreen' alt='License'/></a>
    <a href="https://spring.io/projects/spring-boot"><img src="https://img.shields.io/badge/Spring%20Boot-2.6.3-brightgreen)" alt="npm version"></a>
    <a href="https://standardjs.com"><img src="https://img.shields.io/badge/code_style-standard-brightgreen.svg" alt="Standard - Java Style Guide"></a>
</p>

# æºä»£ç åœ°å€

| **ä»“åº“**   | **URL**                                                      |
| ---------- | ------------------------------------------------------------ |
| **Github** | **[https://github.com/yanghaiji/DataXplorer](https://github.com/yanghaiji/DataXplorer)** |
| **Gitee**  | **[https://gitee.com/YangHaiJi/DataXplorer](https://gitee.com/YangHaiJi/DataXplorer)** |


githubä¸Šä¸ºæœ€æ–°ç‰ˆæœ¬ï¼Œgiteeä¸Šä¼šç•¥å¾®æ»åä¸€äº› å¦‚æœå¯¹æ‚¨æœ‰æ‰€å¸®åŠ©å¯ä»¥ç»™ä¸ªstarï¼Œ âœ¨ä¸è¿·è·¯ï¼Œæ‚¨çš„staræ˜¯æˆ‘ä»¬ç¼–å†™çš„åŠ¨åŠ› ğŸ™


#

`DataXplorer`æ˜¯ä¸€ä¸ªéå¸¸æœ‰ä»·å€¼çš„å·¥å…·ï¼Œå®ƒçš„æ ¸å¿ƒä»»åŠ¡æ˜¯è§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ—¥å¿—æ”¶é›†å’Œåˆ†æçš„æŒ‘æˆ˜ã€‚è¯¥å·¥å…·çš„è®¾è®¡ç†å¿µåŸºäº"æ•°æ®"å’Œ"æ¢ç´¢"ï¼Œæ—¨åœ¨æä¾›ä¸€ç§é«˜åº¦å¯å®šåˆ¶ä¸”ä¸ä¾µå…¥åº”ç”¨ä»£ç çš„æ–¹å¼æ¥å®ç°å¯¹æ—¥å¿—æ•°æ®çš„é‡‡é›†å’Œåˆ†æã€‚

`DataXplorer`åŸºäºJavaæŠ€æœ¯ï¼Œå€ŸåŠ©`javassist`å’Œ`Spring`æ¡†æ¶çš„é›†æˆï¼Œèƒ½å¤Ÿåœ¨ä¸å¹²æ‰°åº”ç”¨ç¨‹åºæ­£å¸¸è¿è¡Œçš„å‰æä¸‹ï¼Œæ•è·å’Œè®°å½•å…³é”®çš„æ—¥å¿—ä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯Webè¯·æ±‚ã€‚è¿™ä½¿å¾—å®ƒæˆä¸ºäº†ä¸€ç§éå¸¸çµæ´»å’Œå¯æ‰©å±•çš„æ¡†æ¶ï¼Œèƒ½å¤Ÿé€‚åº”å„ç§å¤æ‚çš„ç³»ç»Ÿæ¶æ„å’Œä¸šåŠ¡éœ€æ±‚ã€‚

è¿™ä¸ªå·¥å…·çš„å‡ºç°è§£å†³äº†å¤šä¸ªæœåŠ¡ä¹‹é—´ç¼ºä¹ä¸€è‡´æ€§æ—¥å¿—æ”¶é›†æ–¹æ³•çš„é—®é¢˜ï¼Œæ‘’å¼ƒäº†ä¼ ç»ŸAOPæ–¹æ³•çš„é™åˆ¶ã€‚å®ƒçš„ä¼˜ç‚¹åœ¨äºå…¶å³æ’å³ç”¨çš„ç‰¹æ€§ï¼Œä¸éœ€è¦å¯¹ç°æœ‰é¡¹ç›®ä»£ç è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œä»è€Œé™ä½äº†é›†æˆå’Œç»´æŠ¤çš„å¤æ‚æ€§ã€‚

æ­¤å¤–ï¼Œ`DataXplorer`è¿˜æ”¯æŒå°†æ”¶é›†åˆ°çš„æ—¥å¿—æ•°æ®å‘é€è‡³`data-xplorer-server`ï¼Œè¿›è¡Œé«˜çº§çš„æ•°æ®å¤„ç†å’ŒæŒä¹…åŒ–ã€‚è¿™ä¸€ç‰¹æ€§ä¸ºæ—¥å¿—æ•°æ®çš„é›†ä¸­åŒ–åˆ†æå’Œç”¨æˆ·è¡Œä¸ºå»ºæ¨¡æä¾›äº†ä¾¿åˆ©ï¼Œ
æœ‰åŠ©äºå®ç°æ›´æ·±å…¥çš„ä¸šåŠ¡æ´å¯Ÿå’Œå†³ç­–æ”¯æŒã€‚ç»¼åˆè€Œè¨€ï¼Œ`DataXplorer`åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ—¥å¿—ç®¡ç†æ–¹é¢æä¾›äº†ä¸€ç§å…ˆè¿›ä¸”é«˜åº¦å¯å®šåˆ¶çš„è§£å†³æ–¹æ¡ˆï¼Œä¸ºæ•°æ®é©±åŠ¨çš„å†³ç­–æä¾›äº†å¼ºå¤§æ”¯æŒã€‚




# Dashboard

> ç”±äºæœ¬äººæ˜¯å‰ç«¯å°ç™½ï¼Œåªåšäº†ä¸€ä¸ªç®€å•çš„é¡µé¢ï¼Œæä¾›äº†å‡ ä¸ªç®€å•çš„æŠ¥è¡¨ï¼Œ å¯åŠ¨é¡¹ç›®åè®¿é—® http://ip:9090/admin/api/index
>
>ç”¨æˆ·åå¯†ç éƒ½æ˜¯ DataXplorer
>

<h1 align="center">
  <a href="https://github.com/yanghaiji/DataXplorer.git"><img src="https://github.com/yanghaiji/logger-agent/blob/main/doc/img/Dashboard.png" alt="Dashboard" width="800"></a>
</h1>

# åŸç†

<h1 align="center">
  <a href="https://github.com/yanghaiji/DataXplorer.git"><img src="https://github.com/yanghaiji/logger-agent/blob/main/doc/img/theory.png" alt="Standard - javayh-logger-agent" width="500"></a>
</h1>

# æºç ç¼–è¯‘

```
git clone https://github.com/yanghaiji/DataXplorer.git

mvn clean package install

```


# Agent é…ç½®

## æ–¹å¼ä¸€

- å°†ä¸Šä¸€æ­¥éª¤ç¼–è¯‘å¥½çš„`jdata-xplorer-agent-1.0-SNAPSHOT.jar`æ”¾åœ¨æŒ‡å®šçš„ä½ç½®ï¼Œå¦‚`\usr\local\agent`
- åœ¨å¯åŠ¨è„šæœ¬ä¸ŠåŠ å…¥`-javaagent:\usr\local\agent\data-xplorer-agent-1.0-SNAPSHOT.jar`çš„å‘½ä»¤å‚æ•°

## æ–¹å¼äºŒ

```
<dependency>
    <groupId>com.javayh.agent</groupId>
    <artifactId>data-xplorer-agent-boot-starter</artifactId>
</dependency>
```

æ— è®ºé‡‡ç”¨å“ªç§æ–¹å¼éƒ½éœ€è¦åœ¨éœ€è¦ç›‘å¬çš„æœåŠ¡å†…æ·»åŠ å¦‚ä¸‹é…ç½®,å¯æ ¹æ®é¡¹ç›®å®é™…åœºæ™¯è¿›è¡Œä¿®æ”¹
```
data:
  xplorer:
    host: 127.0.0.1
    port: 9098
    show-log: true
    inbound-transfer-rate:
      data-throughput: 100
      period: 45
      initial-delay: 30 

```

# æ—¥å¿—

## æ”¶é›†æ–¹å¼

### è‡ªåŠ¨æ”¶é›†

è¿›è¡Œagentçš„é…ç½®è¿›è¡Œè‡ªåŠ¨çš„æ—¥å¿—æ”¶é›†

```
22:17:05.317 [nioEventLoopGroup-3-3] INFO com.javayh.agent.server.handler.AgentServerHandler - å®¢æˆ·ç«¯åœ°å€: /127.0.0.1:60163
22:17:05.317 [nioEventLoopGroup-3-3] INFO com.javayh.agent.server.handler.AgentServerHandler - å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯æ˜¯: {"actionTime":7596,"appName":"agent-example","body":"sss=sss","createBy":"javayh-agent","createTime":123,"ip":"0:0:0:0:0:0:0:1","method":"GET","sourceType":0,"traceId":"b4d071fb-54c2-40f8-b025-f4362232f7d6","type":1,"url":"/agent/example/test/agent"}

```

### æ‰‹åŠ¨åŸ‹ç‚¹

é€šè¿‡ä½¿ç”¨`LoggerReceived`è¿›è¡Œè‡ªå®šä¹‰çš„åŸ‹ç‚¹
```
LoggerReceived.received("testè‡ªå®šä¹‰åŸ‹ç‚¹", 1, "haiji", null);
```

```
22:17:05.316 [nioEventLoopGroup-3-3] INFO com.javayh.agent.server.handler.AgentServerHandler - å®¢æˆ·ç«¯åœ°å€: /127.0.0.1:60163
22:17:05.317 [nioEventLoopGroup-3-3] INFO com.javayh.agent.server.handler.AgentServerHandler - å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯æ˜¯: {"appName":"agent-example","body":"testè‡ªå®šä¹‰åŸ‹ç‚¹","createBy":"haiji","createTime":123,"query":"testè‡ªå®šä¹‰åŸ‹ç‚¹","sourceType":0,"traceId":"b4d071fb-54c2-40f8-b025-f4362232f7d6","type":1}

```


## æ—¥å¿—æ ¼å¼

ç›®å‰åªæ”¶é›†äº†ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼Œå¤§å®¶å¯ä»¥åœ¨`LoggerCollector`è¿›è¡Œæ‰©å±•ï¼Œä¸°å¯Œè‡ªå·±çš„æ—¥å¿—æ ¼å¼

```metadata json
{
    "actionTime": 23,
    "appName": "agent-example",
    "body": "",
    "createBy": "javayh-agent",
    "createTime": null,
    "ip": "0:0:0:0:0:0:0:1",
    "method": "GET",
    "traceId": "bd861b19-242a-4846-838f-62519fd180b4",
    "type": 1,
    "url": "/agent/example/test/agent"
}
```


```
2023-08-19 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-08-19 [http-nio-8080-exec-2] INFO  c.j.a.example.web.ExampleController - ewohefo
2023-08-19 [http-nio-8080-exec-2] INFO  c.j.a.c.i.AgentLogInterception - åŸ‹ç‚¹æ—¥å¿— : {"actionTime":23,"appName":"agent-example","body":"","createBy":"javayh-agent","createTime":null,"ip":"0:0:0:0:0:0:0:1","method":"GET","traceId":"bd861b19-242a-4846-838f-62519fd180b4","type":1,"url":"/agent/example/test/agent"}

```

